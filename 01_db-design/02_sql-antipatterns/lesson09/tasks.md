・課題1  
  1-1 mailAddress  
      Checkを使わない  
      RFCに順序しないメールアドレスも存在するため  
  1-2 ユーザーが退会  
       Triggerを使わない  
       ロジックが見えなくなってしまうため  
  1-3 「gender」  
       Enumを使わない  
       maleをman, femaleをwomanへの変更が難しい  
  1-4 「postCode」   
       Domainを使わない  
       海外向けのアプリケーションの場合、  
       日本の郵便番号だけでなく、世界中の国ごとに設定する必要があるため  

  2 アプリケーション側とデータベース側  
    アプリケーションで制約を課す  
    どんな制約があるのかコードでわかるため  
    データベース側だけの場合、どんな制約が設定されているかわかりにくい  
    また挿入を試しエラーとなって初めて、その文字列などが不正とわかるためレスポンスに時間がかかる  

・課題3  
  ユーザーが住んでいる都道府県をEnumで制約する

参考  
SQLアンチパターン 10章 サーティワンフレーバー  
失敗から学ぶRDBの正しい歩き方 第9章 強過ぎる制約  

メモ  
・Enum, Check, Domainを設定した場合  
    どんな制約が設定されているかわかりづらい  
    アプリケーションでも制御可能  
    仕様変更に弱い、柔軟性を失う  
    早過ぎる最適化  

・銀行など金融系などで  
   「Aテーブルに挿入した場合、Bテーブルにも挿入する」  
   を必ず担保しなければならないときはTriggerを使って良いかも  
